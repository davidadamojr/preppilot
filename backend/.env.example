# PrepPilot Environment Configuration
# Copy this to .env and update with your values

# Application
APP_NAME=PrepPilot API
APP_VERSION=0.1.0
DEBUG=false

# Logging
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Timezone
# IANA timezone name for scheduling and display
# Examples: UTC, America/New_York, Europe/London, Asia/Tokyo
TIMEZONE=UTC

# Database
# For local development with Docker: postgresql://preppilot:preppilot@localhost:5432/preppilot
# For production: Update with your PostgreSQL connection string
DATABASE_URL=postgresql://preppilot:preppilot@localhost:5432/preppilot

# Database Pool Configuration
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_PRE_PING=true

# JWT Authentication
# IMPORTANT: Generate a secure random key for production!
# You can use: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# CORS Origins (JSON array format)
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8000"]

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_LOGIN=5/minute
RATE_LIMIT_REGISTER=10/minute
RATE_LIMIT_PASSWORD_CHANGE=5/minute
RATE_LIMIT_FORGOT_PASSWORD=3/minute

# Meal Plan Configuration
PLAN_DEFAULT_DAYS=3
PLAN_MAX_DAYS=7
PLAN_MAX_FUTURE_DAYS=30
# Maximum number of meal plans a user can have (0 = unlimited)
MAX_PLANS_PER_USER=50

# Fridge Configuration
FRIDGE_MAX_FRESHNESS_DAYS=365
FRIDGE_EXPIRING_THRESHOLD_DEFAULT=2

# Pagination
PAGINATION_DEFAULT_PAGE_SIZE=20
PAGINATION_MAX_PAGE_SIZE=100
PAGINATION_PLANS_DEFAULT_LIMIT=10

# Background Jobs
ENABLE_BACKGROUND_JOBS=true
FRESHNESS_DECAY_HOUR=0

# Email Configuration (optional - disabled by default)
EMAIL_ENABLED=false
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_FROM_ADDRESS=noreply@preppilot.app
EMAIL_FROM_NAME=PrepPilot

# Email Retry Configuration
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_BASE_DELAY=1.0
EMAIL_RETRY_MAX_DELAY=60.0
EMAIL_RETRY_EXPONENTIAL_BASE=2.0

# =============================================================================
# Feature Flags
# =============================================================================
# Feature flags allow you to enable/disable features without code changes.
# Set to true/false to control feature availability.
# All features are enabled by default.

# Email features
FEATURE_EMAIL_PLAN_NOTIFICATIONS=true
FEATURE_EMAIL_EXPIRING_ALERTS=true
FEATURE_EMAIL_ADAPTATION_SUMMARIES=true

# Export features
FEATURE_EXPORT_PDF=true
FEATURE_EXPORT_SHOPPING_LIST=true

# Plan features
FEATURE_PLAN_DUPLICATION=true
FEATURE_PLAN_ADAPTATION=true
FEATURE_MEAL_SWAP=true

# Fridge features
FEATURE_FRIDGE_BULK_IMPORT=true
FEATURE_FRIDGE_EXPIRING_NOTIFICATIONS=true

# Recipe features
FEATURE_RECIPE_SEARCH=true
FEATURE_RECIPE_BROWSER=true

# Admin features
FEATURE_ADMIN_USER_MANAGEMENT=true
FEATURE_ADMIN_AUDIT_LOGS=true

# Experimental features
FEATURE_PREP_TIMELINE_OPTIMIZATION=true
FEATURE_LLM_STEP_PARSING=true
FEATURE_OFFLINE_MODE=true

# =============================================================================
# OpenAI Configuration (for LLM-powered step parsing)
# =============================================================================
# LLM step parsing enables semantic normalization of recipe steps for better
# batching and parallel scheduling. Requires an OpenAI API key.

# Your OpenAI API key (required for LLM step parsing)
OPENAI_API_KEY=

# Model to use for step parsing (default: gpt-4o)
OPENAI_MODEL=gpt-4o

# Request timeout in seconds (default: 30)
OPENAI_TIMEOUT_SECONDS=30

# Temperature for parsing (lower = more consistent, default: 0.1)
OPENAI_TEMPERATURE=0.1

# Maximum retry attempts for transient failures (default: 3)
OPENAI_MAX_RETRIES=3

# Cache TTL for parsed steps in hours (default: 24)
STEP_PARSING_CACHE_TTL_HOURS=24
